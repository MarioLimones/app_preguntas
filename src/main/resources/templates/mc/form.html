<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout :: head(${mode} == 'edit' ? 'Editar pregunta de seleccion multiple' : 'Nueva pregunta de seleccion multiple')"></head>
<body class="app-bg text-slate-100">
  <div class="min-h-screen">
    <header th:replace="fragments/layout :: header"></header>

    <main class="section">
      <div class="container-app">
        <div class="mb-8">
          <h1 class="section-title" th:text="${mode} == 'edit' ? 'Editar pregunta' : 'Crear pregunta'">Crear pregunta</h1>
          <p class="section-subtitle">Escribe la pregunta, las opciones y marca varias correctas.</p>
        </div>

        <div class="card-solid p-6">
          <form th:action="${mode} == 'edit' ? @{/mc/questions/{id}(id=${id})} : @{/mc/questions}"
                th:object="${form}" method="post" class="space-y-2">
            <div th:replace="fragments/forms :: csrf"></div>

            <div>
              <label class="text-sm font-semibold text-slate-200">Enunciado</label>
              <textarea class="mt-2 w-full rounded-2xl border border-slate-700/60 bg-slate-900/70 p-3 text-sm text-slate-100"
                        th:field="*{statement}" rows="4" placeholder="Escribe la pregunta"></textarea>
              <div class="mt-2 text-xs text-amber-200" th:if="${#fields.hasErrors('statement')}" th:errors="*{statement}"></div>
            </div>

            <div class="mt-4">
              <label class="text-sm font-semibold text-slate-200">Opciones (una por linea)</label>
              <textarea class="mt-2 w-full rounded-2xl border border-slate-700/60 bg-slate-900/70 p-3 text-sm text-slate-100"
                        th:field="*{optionsText}" rows="6" placeholder="Opcion 1&#10;Opcion 2&#10;Opcion 3"></textarea>
              <div class="mt-2 text-xs text-amber-200" th:if="${#fields.hasErrors('optionsText')}" th:errors="*{optionsText}"></div>
            </div>

            <div class="mt-4">
              <label class="text-sm font-semibold text-slate-200">Numeros de opciones correctas (separados por coma)</label>
              <input class="mt-2 w-full rounded-2xl border border-slate-700/60 bg-slate-900/70 p-3 text-sm text-slate-100"
                     type="text" th:field="*{correctIndexesText}" placeholder="1, 3" />
              <div class="mt-2 text-xs text-amber-200" th:if="${#fields.hasErrors('correctIndexesText')}" th:errors="*{correctIndexesText}"></div>
            </div>

            <div class="mt-4">
              <label class="text-sm font-semibold text-slate-200">Explicacion (opcional)</label>
              <textarea class="mt-2 w-full rounded-2xl border border-slate-700/60 bg-slate-900/70 p-3 text-sm text-slate-100"
                        th:field="*{explanation}" rows="3" placeholder="Contexto o explicacion"></textarea>
            </div>

            <div class="mt-6 flex flex-wrap gap-3">
              <button class="btn btn-primary" type="submit" th:text="${mode} == 'edit' ? 'Guardar cambios' : 'Crear pregunta'">
                Crear pregunta
              </button>
              <a class="btn btn-secondary" th:href="@{/mc/questions}" href="/mc/questions">Volver al listado</a>
              <a class="btn btn-ghost" th:href="@{/#inicio}" href="/#inicio">Volver a inicio</a>
            </div>
          </form>
        </div>
      </div>
    </main>

    <footer th:replace="fragments/layout :: footer"></footer>
  </div>
</body>
</html>
