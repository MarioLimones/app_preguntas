<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/layout :: head(${mode} == 'edit' ? 'Editar pregunta V/F' : 'Nueva pregunta V/F')"></head>

<body class="bg-sky-50">
  <header th:replace="fragments/layout :: header"></header>

  <main class="container mx-auto p-6 max-w-3xl">
    <div class="mb-6">
      <h1 class="text-2xl font-bold text-gray-800" th:text="${mode} == 'edit' ? 'Editar pregunta' : 'Crear pregunta'">
        Crear pregunta
      </h1>
      <p class="text-gray-600 mt-1">Define el enunciado y la respuesta correcta.</p>
    </div>

    <div class="bg-blue-100 rounded-lg shadow-sm p-6 border border-blue-200">
      <form th:action="${mode} == 'edit' ? @{/vf/preguntas/{id}(id=${question.id})} : @{/vf/preguntas}"
        th:object="${question}" method="post" class="space-y-4">
        <div th:replace="fragments/forms :: csrf"></div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Enunciado</label>
          <textarea
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
            th:field="*{statement}" rows="4" placeholder="Escribe la pregunta"></textarea>
          <div class="mt-1 text-sm text-red-600" th:if="${#fields.hasErrors('statement')}" th:errors="*{statement}">
          </div>
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Respuesta correcta</label>
          <div class="flex gap-4">
            <label class="flex items-center gap-2">
              <input class="w-4 h-4" type="radio" th:field="*{correctAnswer}" value="true" />
              <span class="text-sm text-gray-700">Verdadero</span>
            </label>
            <label class="flex items-center gap-2">
              <input class="w-4 h-4" type="radio" th:field="*{correctAnswer}" value="false" />
              <span class="text-sm text-gray-700">Falso</span>
            </label>
          </div>
          <div class="mt-1 text-sm text-red-600" th:if="${#fields.hasErrors('correctAnswer')}"
            th:errors="*{correctAnswer}"></div>
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Explicación (opcional)</label>
          <textarea
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"
            th:field="*{explanation}" rows="3" placeholder="Contexto o explicación"></textarea>
        </div>

        <div class="flex gap-3 pt-4">
          <button class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700" type="submit"
            th:text="${mode} == 'edit' ? 'Guardar cambios' : 'Crear pregunta'">
            Crear pregunta
          </button>
          <a class="bg-gray-300 text-gray-700 px-6 py-2 rounded hover:bg-gray-400" th:href="@{/vf/preguntas}"
            href="/vf/preguntas">
            Cancelar
          </a>
        </div>
      </form>
    </div>
  </main>

  <footer th:replace="fragments/layout :: footer"></footer>
</body>

</html>
