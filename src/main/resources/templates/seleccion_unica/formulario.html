<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head
  th:replace="fragments/layout :: head(${mode} == 'edit' ? 'Editar pregunta de selección única' : 'Nueva pregunta de selección única')">
</head>

<body class="bg-sky-50">
  <header th:replace="fragments/layout :: header"></header>

  <main class="container mx-auto p-6 max-w-3xl">
    <div class="mb-6">
      <h1 class="text-2xl font-bold text-gray-800" th:text="${mode} == 'edit' ? 'Editar pregunta' : 'Crear pregunta'">
        Crear pregunta
      </h1>
      <p class="text-gray-600 mt-1">Escribe la pregunta, las opciones y marca la correcta.</p>
    </div>

    <div class="bg-green-100 rounded-lg shadow-sm p-6 border border-green-200">
      <form th:action="${mode} == 'edit' ? @{/sc/preguntas/{id}(id=${id})} : @{/sc/preguntas}" th:object="${form}"
        method="post" class="space-y-4">
        <div th:replace="fragments/forms :: csrf"></div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Enunciado</label>
          <textarea
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500"
            th:field="*{statement}" rows="4" placeholder="Escribe la pregunta"></textarea>
          <div class="mt-1 text-sm text-red-600" th:if="${#fields.hasErrors('statement')}" th:errors="*{statement}">
          </div>
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Opciones (una por línea)</label>
          <textarea
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500"
            th:field="*{optionsText}" rows="6" placeholder="Opción 1&#10;Opción 2&#10;Opción 3"></textarea>
          <div class="mt-1 text-sm text-red-600" th:if="${#fields.hasErrors('optionsText')}" th:errors="*{optionsText}">
          </div>
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Número de opción correcta (1..n)</label>
          <input
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500"
            type="number" min="1" th:field="*{correctIndex}" placeholder="1" />
          <div class="mt-1 text-sm text-red-600" th:if="${#fields.hasErrors('correctIndex')}"
            th:errors="*{correctIndex}"></div>
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Explicación (opcional)</label>
          <textarea
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500"
            th:field="*{explanation}" rows="3" placeholder="Contexto o explicación"></textarea>
        </div>

        <div class="flex gap-3 pt-4">
          <button class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700" type="submit"
            th:text="${mode} == 'edit' ? 'Guardar cambios' : 'Crear pregunta'">
            Crear pregunta
          </button>
          <a class="bg-gray-300 text-gray-700 px-6 py-2 rounded hover:bg-gray-400" th:href="@{/sc/preguntas}"
            href="/sc/preguntas">
            Cancelar
          </a>
        </div>
      </form>
    </div>
  </main>

  <footer th:replace="fragments/layout :: footer"></footer>
</body>

</html>
