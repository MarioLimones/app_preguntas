<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head
  th:replace="fragments/layout :: head(${mode} == 'edit' ? 'Editar pregunta de selección múltiple' : 'Nueva pregunta de selección múltiple')">
</head>

<body class="bg-sky-50">
  <header th:replace="fragments/layout :: header"></header>

  <main class="container mx-auto p-6 max-w-3xl">
    <div class="mb-6">
      <h1 class="text-2xl font-bold text-gray-800" th:text="${mode} == 'edit' ? 'Editar pregunta' : 'Crear pregunta'">
        Crear pregunta
      </h1>
      <p class="text-gray-600 mt-1">Escribe la pregunta, las opciones y marca varias correctas.</p>
    </div>

    <div class="bg-purple-100 rounded-lg shadow-sm p-6 border border-purple-200">
      <form th:action="${mode} == 'edit' ? @{/mc/questions/{id}(id=${id})} : @{/mc/questions}" th:object="${form}"
        method="post" class="space-y-4">
        <div th:replace="fragments/forms :: csrf"></div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Enunciado</label>
          <textarea
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-purple-500"
            th:field="*{statement}" rows="4" placeholder="Escribe la pregunta"></textarea>
          <div class="mt-1 text-sm text-red-600" th:if="${#fields.hasErrors('statement')}" th:errors="*{statement}">
          </div>
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Opciones (una por línea)</label>
          <textarea
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-purple-500"
            th:field="*{optionsText}" rows="6" placeholder="Opción 1&#10;Opción 2&#10;Opción 3"></textarea>
          <div class="mt-1 text-sm text-red-600" th:if="${#fields.hasErrors('optionsText')}" th:errors="*{optionsText}">
          </div>
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Números de opciones correctas (separados por
            coma)</label>
          <input
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-purple-500"
            type="text" th:field="*{correctIndexesText}" placeholder="1, 3" />
          <div class="mt-1 text-sm text-red-600" th:if="${#fields.hasErrors('correctIndexesText')}"
            th:errors="*{correctIndexesText}"></div>
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Explicación (opcional)</label>
          <textarea
            class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-purple-500"
            th:field="*{explanation}" rows="3" placeholder="Contexto o explicación"></textarea>
        </div>

        <div class="flex gap-3 pt-4">
          <button class="bg-purple-600 text-white px-6 py-2 rounded hover:bg-purple-700" type="submit"
            th:text="${mode} == 'edit' ? 'Guardar cambios' : 'Crear pregunta'">
            Crear pregunta
          </button>
          <a class="bg-gray-300 text-gray-700 px-6 py-2 rounded hover:bg-gray-400" th:href="@{/mc/questions}"
            href="/mc/questions">
            Cancelar
          </a>
        </div>
      </form>
    </div>
  </main>

  <footer th:replace="fragments/layout :: footer"></footer>
</body>

</html>